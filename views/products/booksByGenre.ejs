<!DOCTYPE html>
<html lang="es">
<head>
    <%- include('../partials/headParcial.ejs') %>
<title><% if (locals && locals.category) { %>
    Categoría: <%= category.name %>
<% } else { %>
    Libros por categorías
<% } %></title>
<link rel="stylesheet" href="/css/productDetailStyles.css">
</head>
<body>
    <%- include('../partials/header.ejs') %>
    <main>
        <h1><% if (locals && locals.category) { %>
            Categoría: <%= category.name %>
        <% } else { %>
            Libros por categorías
        <% } %></h1>
    
        <% if (locals && locals.noBooksMessage) { %>
            <p><%- locals.noBooksMessage %></p>
            <% if (locals.imageSrc) { %>
                <img src="<%- locals.imageSrc %>" alt="categoría sin libros" />
            <% } %>
        <% } else { %>
    
        <section class="genres">
            <% if (locals && locals.categories) { %>
                <% categories.forEach(category => { %>
                    <div class="box-genre">
                        <a href="/products/genres?genre=<%= category.id %>"><%= category.name %></a>
                    </div>
                <% }) %>
            <% } %>
        </section>

        <section class="recommendation">
            <div class="box-card">
                <% if (locals && locals.booksCategory) { %>
                    <% locals.booksCategory.forEach(book => { %>
                    
                        <div class="book-card">
                            <div class="card-product">
                                <div class="card-info">
                                    <img src="/images/books/<%= book.image ? book.image : 'cover-not-available.png' %>" alt="Portada de <%= book.title %> ">
                                    <hr>
                                    <h3><a href="/products/<%= book.id %>"><%= book.title %></a></h3>
                                    <p><a href=""><%= book.author %></a></p>
                                    <p><a href=""><%= book.editorial %></a></p>
                                </div>
                                <div class="card-buy">
                                    <a class="button-read" href="/products/<%= book.id %>">VER MÁS</a>
                                    <button class="button-cart">AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <% }) %>
                        <% } %>
                    </div>
                </section>
            <% } %>
        </main>
    <%- include('../partials/footer.ejs') %>
</body>
</html>